bot.on("presenceUpdate", (old_user, new_user) => {
    if (!old_user.roles.some(r=>['294914156916768769'].includes(r.id))) return;
    if (!new_user.presence.game) return;
    if (old_user.presence.game) {
        if (old_user.presence.game.streaming) return;
    }
    if (!new_user.presence.game.streaming) return;
    bot.channels.get('482506093206044674').send(`üì∫ –•–µ–π, —Ä–µ–±—è—Ç! ${old_user.user} –Ω–∞—á–∞–ª —Å—Ç—Ä–∏–º! –ó–∞—Ö–æ–¥–∏–º! ${new_user.presence.game.url}`);
});
[`–í—Ä–µ–º—è ${(new Date(new Date().getTime() + 3*60*60*1000)).toISOString().replace(/(.*?)T/, '').replace(/\..+/, '')+' –ø–æ –ú–°–ö'}`, 

  module.exports.run = async(bot, message, args) => {
    const Canvas = require('canvas');
    const fs = require("fs");
    const Discord = module.require(`discord.js`);
    const superagent = require('superagent');
    const snekfetch = require('snekfetch');
    const Sequelize = require('sequelize')
const { version } = require("discord.js");


    const applyText = (canvas, text) => {
        const ctx = canvas.getContext('2d');

        let fontSize = 70;

        do {
            ctx.font = `${fontSize -= 10}px  	cursive`;
        } while (ctx.measureText(text).width > canvas.width - 300);

        // Return the result to use in the actual canvas
        return ctx.font;
    };



    member = message.author || message.member;

    const canvas = Canvas.createCanvas(1300, 1300);
    const ctx = canvas.getContext('2d');

    ctx.strokeStyle = '#3090ee';
    ctx.beginPath();
    ctx.font = ' bold 80px sans-serif ';
    ctx.fillStyle = '#3090ee';
    ctx.weight = `1000`
    ctx.shadowColor = `#3090ee`
    ctx.shadowOffsetX = 0
    ctx.shadowOffsetY = 0
    ctx.shadowBlur = 10;
    ctx.strokeStyle = '#ffffff';
    ctx.beginPath();
    ctx.font = ' bold 80px sans-serif ';
    ctx.fillStyle = '#ffffff';
    ctx.weight = `1000`
    ctx.shadowColor = `#ffffff`
    ctx.shadowOffsetX = 0
    ctx.shadowOffsetY = 0
    ctx.shadowBlur = 10;
    ctx.fillText(`${bot.user.username}`, canvas.width / 8.1, canvas.height / 1.1);
    ctx.fillText(`Users: ${bot.users.size.toLocaleString()}`, 50, 100)
    ctx.fillText(`Servers: ${bot.guilds.size.toLocaleString()}`, 45, 200)
    ctx.fillText(`Emojis: ${bot.emojis.size.toLocaleString()}`, 40, 300)
    ctx.fillText(`Channels: ${bot.channels.size.toLocaleString()}`, 35, 400)
    ctx.fillText(`Commands: ${bot.commands.size.toLocaleString()}`, 30, 500)
    ctx.fillText(`Discord API: ${Math.round(bot.ping)} ms`, 25, 600)
    ctx.fillText(`Memory usage: ${(process.memoryUsage().heapUsed / (1000 * 1000)).toFixed(2)} MB`, 20, 700)
    ctx.fillText(`Uptime: ${Math.round(bot.uptime / (1000 * 60 * 60 * 24))} d, ${Math.round(bot.uptime / (1000 * 60 * 60))} h, ${Math.round(bot.uptime / (1000 * 60)) % 60} m, ${Math.round(bot.uptime / 1000) % 60} s`, 15, 800)
    ctx.fillText(`Discord.js  v${version}`, 10, 900)
    ctx.fillText(`Node.js ${process.version}`, 5, 1000)
    ctx.stroke();   


    ctx.closePath();


    ctx.beginPath();
    ctx.fillStyle = '#ffffff';
    ctx.font = 'bold 40px sans-serif';



    ctx.fillStyle = '#ffffff';
    ctx.weight = `1000`
    ctx.shadowColor = `#ffffff`
    ctx.shadowOffsetX = 0
    ctx.shadowOffsetY = 0
    ctx.shadowBlur = 10;

    const attachment = new Discord.Attachment(canvas.toBuffer(), 'welcome-image.png');

    message.channel.send(`**–≠—Ç–æ –≤—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ –±–æ—Ç–µ ${bot.user.username}**`, attachment)




};
  
  
  
  
  let serverid = config.serverid
  var member = message.member;
if(!serverid.includes(member.guild.id)) return message.channel.send("–û—Ñ–æ—Ä–º–∏—Ç–µ premium");
  https://discordapi.com/permissions.html
  
  
  
  /*
let config = require("../botconfig.json");
let serverid = config.serverid
var member = message.member;
if(!serverid.includes(member.guild.id)) && return message.channel.send("–û—Ñ–æ—Ä–º–∏—Ç–µ premium");
if(!message.member.hasPermission("ADMINISTRATOR")) return message.channel.send("__**–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤!**__").then(msg => msg.delete(5*1000));
*/


let serverid = config.serverid
var member = message.member;


    let server = config.server
var member = message.member;
if(!server.includes(member.guild.id)) return message.channel.send("–û—Ñ–æ—Ä–º–∏—Ç–µ vip")


if((!serverid.includes(member.guild.id)) && !userid.includes(message.author.id))  
  return message.channel.send("__**–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤!**__").then(msg => msg.delete(5*1000));



let serverid = config.serverid
      let userid = config.userid
var member = message.member;
let config = require("../../botconfig.json");
let userid = config.userid
        if ((!message.member.hasPermission("MANAGE_MESSAGES")) && !userid.includes(message.author.id))
            return message.channel.send("__**–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤!**__").then(msg => msg.delete(5*1000));


            let config = require("../../botconfig.json");
            var member = message.member;
            let ownerid = config.ownerid            
if(!ownerid.includes(message.author.id)) return message.member.send("__**–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤!**__").then(msg => msg.delete(5*1000));



–ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–µ—Ä–º–∏—à–∏–Ω—Å—ã
ADMINISTRATOR (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
CREATE_INSTANT_INVITE (–°–æ–∑–¥–∞—Ç—å —ç–∫—Å–ø—Ä–µ—Å—Å-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ)
KICK_MEMBERS (–∫–∏–∫–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
BAN_MEMBERS (–±–∞–Ω–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
MANAGE_CHANNELS (–£–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–Ω–∞–ª–∞–º–∏)
MANAGE_GUILD (–£–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–º)
ADD_REACTIONS (–î–æ–±–∞–≤–ª—è—Ç—å —Ä–µ–∞–∫—Ü–∏–∏)
VIEW_AUDIT_LOG (–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞)
PRIORITY_SPEAKER (–ü—Ä–∏–æ—Ä–µ—Ç–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º (–ú–µ–≥–∞—Ñ–æ–Ω))
VIEW_CHANNEL (–ß–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã –∏ –≤–∏–¥–µ—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ)
SEND_MESSAGES (–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è)
SEND_TTS_MESSAGES (–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å TTS —Å–æ–æ–±—â–µ–Ω–∏—è)
MANAGE_MESSAGES (–£–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏)
EMBED_LINKS (–í—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏)
ATTACH_FILES (–ü—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Ñ–∞–π–ª—ã)
READ_MESSAGE_HISTORY (–ß–∏—Ç–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π)
MENTION_EVERYONE (–£–ø–æ–º–∏–Ω–∞—Ç—å –≤—Å–µ—Ö)
USE_EXTERNAL_EMOJIS (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —ç–º–æ–¥–∑–∏)
CONNECT (–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è)
SPEAK (–ì–æ–≤–æ—Ä–∏—Ç—å)
MUTE_MEMBERS (–û—Ç–∫–ª—é—á–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –≥–æ–ª–æ—Å)
DEAFEN_MEMBERS (–û—Ç–∫–ª—é—á–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∑–≤—É–∫)
MOVE_MEMBERS (–ü–µ—Ä–µ–º–µ—â–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
USE_VAD (–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ –≥–æ–ª–æ—Å—É)
CHANGE_NICKNAME (–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∏–∫–Ω–µ–π–º)
MANAGE_NICKNAMES (–£–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∏–∫–Ω–µ–π–º–∞–º–∏)
MANAGE_ROLES (–£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–ª—è–º–∏)
MANAGE_WEBHOOKS (–£–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ–±—Ö—É–∫–∞–º–∏ (webhooks))
MANAGE_EMOJIS (–£–ø—Ä–∞–≤–ª—è—Ç—å —ç–º–æ–¥–∑–∏)














 setInterval(() => {
        bot.guilds.get('643389876053475348').channels.get("649395464554151951").fetchMessage("705872365393019002").then(msg => {
                      const top = bot.guilds.sort((a, b) => a.memberCount - b.memberCount).array().reverse()
                       msg.edit(`**Global bot status**`,new Discord.RichEmbed().setAuthor(`${bot.user.username}`, `${bot.user.avatarURL}`)
             // msg.edit(`**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${moment(Date()).format(`DD.MM.YYYY`)}**`//,new Discord.RichEmbed().setAuthor(`${bot.user.username}`, `${bot.user.avatarURL}`)
            .setColor("RANDOM")
            .setThumbnail(`${bot.user.avatarURL}`)
            .setTimestamp()
                .addField("**‚Ä¢ Mem Usage**", `**${(process.memoryUsage().heapUsed / 1024 / 1024).toFixed(2)} / ${(os.totalmem() / 1024 / 1024).toFixed(2)} MB**`, false)
                .addField("**‚Ä¢ Users**", `**${bot.users.size.toLocaleString()}**`, false)
              .addField("**‚Ä¢ Emojis**", `**${bot.emojis.size}**`, false)
                .addField("**‚Ä¢ Servers**", `**${bot.guilds.size.toLocaleString()}**`, false)
                .addField("**‚Ä¢ Channels** ", `**${bot.channels.size.toLocaleString()}**`, false)
                .addField("**‚Ä¢ CPU**", `\`\`\`md\n${os.cpus().map(i => `${i.model}`)[0]}\`\`\``,false)
                .addField("**‚Ä¢ ping**", `**${bot.ping}**`, false)
                .addField("**‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**",` **${Math.round(bot.uptime / (1000 * 60 * 60 * 24))} d, ${Math.round(bot.uptime / (1000 * 60 * 60))} h, ${Math.round(bot.uptime / (1000 * 60)) % 60} m, ${Math.round(bot.uptime / 1000) % 60} s**`, false)
               .addField(`**–¢–û–ü –°–ï–†–í–ï–†–û–í –ë–û–¢–ê**`, `1. **${top[0].name}**: ${top[0].memberCount}\n2. **${top[1].name}**: ${top[1].memberCount}\n3. **${top[2].name}**: ${top[2].memberCount}\n4. **${top[3].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[3].memberCount}\n5. **${top[4].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[4].memberCount}\n6. **${top[5].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[5].memberCount}\n7. **${top[6].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[6].memberCount}\n8. **${top[7].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[7].memberCount}\n9. **${top[8].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[8].memberCount}\n10. **${top[9].name}**: –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ${top[9].memberCount}`, false))
        })
      },10000) 
setInterval(() => {
const vremya_po_msk = strftime.timezone(180) 
bot.channels.get("649395464554151951").fetchMessage("701751469623214100").then(msg => {
msg.edit(`**Server status**`,new Discord.RichEmbed().setAuthor(`${bot.user.username}`, `${bot.user.avatarURL}`)
.setColor("RANDOM")
.setThumbnail(`${bot.user.avatarURL}`)
.setTimestamp()
.addField("**‚Ä¢ Boost server**", `**${bot.guilds.get('643389876053475348').premiumSubscriptionCount}**`, false)
.addField("**‚Ä¢ Voice Online**", `**${bot.guilds.get('643389876053475348').members.filter(m => m.voiceChannel).size}**`, false)
.addField("**‚Ä¢ Time**", `**${vremya_po_msk('%H:%M:%S', new Date())} –ø–æ –ú–°–ö**`, false)
.addField("**‚Ä¢ User/Bots**", `${bot.guilds.get('643389876053475348').members.size}`, false)
.addField("**‚Ä¢ User**", `**${bot.guilds.get('643389876053475348').members.filter(mem => !mem.user.bot === true).size}**`, false)
.addField("**‚Ä¢ Bots**", `**${bot.guilds.get('643389876053475348').members.filter(mem => mem.user.bot === true).size}**`, false)
.addField("**‚Ä¢ Online** ", `**${bot.guilds.get('643389876053475348').members.filter(m => ["online"].includes(m.presence.status)).size}**`, false)
.addField("**‚Ä¢ Not active** ", `**${bot.guilds.get('643389876053475348').members.filter(m => ["idle"].includes(m.presence.status)).size}**`, false)
.addField("**‚Ä¢ Do not disturb** ", `**${bot.guilds.get('643389876053475348').members.filter(m => ["dnd"].includes(m.presence.status)).size}**`, false)
.addField("**‚Ä¢ Offline** ", `**${bot.guilds.get('643389876053475348').members.filter(m => m.presence.status === "offline").size}**`)
.addField("**‚Ä¢ Voice/Chat/Category**", `**${bot.guilds.get('643389876053475348').channels.size}**\n**Category:${bot.guilds.get('643389876053475348').channels.filter(m => m.type === 'category').size}**\n**Chat:${bot.guilds.get('643389876053475348').channels.filter(m => m.type === 'text').size}**\n**Voice:${bot.guilds.get('643389876053475348').channels.filter(m => m.type === 'voice').size}**`, false)
.addField("**‚Ä¢ Developer** ", `**${bot.guilds.get('643389876053475348').owner.user.tag}**`, false)
.addField("**‚Ä¢ Verification level** ", `**${bot.guilds.get('643389876053475348').verificationLevel}**`, false)
.addField("**‚Ä¢ Server Region** ", `**${bot.guilds.get('643389876053475348').region}**`, false)
  
  
)

})
      },10000)
      
      
      /*

bot.on("message", message => {
  if (message.author.bot) return; //n√£o responde bot
  if (message.channel.type == "dm") return; //n√£o reponde dm
  let prefixes = JSON.parse(fs.readFileSync("./prefixes.json", "utf8"));
  if (!prefixes[message.guild.id]) {
    prefixes[message.guild.id] = {
      prefixes: config.prefix
    };
  }

  let prefix = prefixes[message.guild.id].prefixes;

  if (!message.content.startsWith(prefix)) return;
  let msgArr = message.content.split(" ");
  let command = msgArr[0].toLowerCase();
  let args = msgArr.slice(1);
  bot.send = msg => message.channel.send(msg);
  if (!message.content.startsWith(prefix)) return;
  let cmds = bot.commands.get(command.slice(prefix.length));
  if (!cmds)
    cmds = bot.commands.get(bot.aliases.get(command.slice(prefix.length)));
  if (cmds) cmds.run(bot, message, args);
}); 


bot.on("message", message => {
  let msgArr = message.content.split(" ");
  let command = msgArr[0].toLowerCase();
  let args = msgArr.slice(1);
  bot.send = msg => message.channel.send(msg);
  if (!message.content.startsWith(prefix)) return;
  let cmds = bot.commands.get(command.slice(prefix.length));
  if (!cmds) cmds = bot.commands.get(bot.aliases.get(command.slice(prefix.length)))
  if(cmds) cmds.run(bot, message, args);
});
*/
// Load up the discord.js library. Else throw an error.














// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã - –õ–∏–±—ã
const Discord = require('discord.js');
const client = new Discord.Client();
let config = require("../../botconfig.json");
//const config = require("./config.json"); // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const wait = require('util').promisify(setTimeout);

const r_size = 7;
const r_colors = new Array(r_size);
var r_place = 0;
//const r_colors = ["#DF5050","#5087DF","#313131","#FFFFFF"];
const guild = client.guilds.first();
module.exports.run = async (bot, message, args) => {
    var member = message.member;
    let ownerid = config.ownerid            
if(!ownerid.includes(message.author.id)) return message.channel.send("__**–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤!**__").then(msg => msg.delete(5*1000));
//client.on("ready", () => {
    // –∫–æ–≥–¥–∞ –±–æ—Ç –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º discord

    for (var i=0; i < r_size; i++) {
        var red   = sin_to_hex(i, 0 * Math.PI * 2/3); // 0   deg
        var blue  = sin_to_hex(i, 1 * Math.PI * 2/3); // 120 deg
        var green = sin_to_hex(i, 2 * Math.PI * 2/3); // 240 deg
    
        r_colors[i] = '#'+ red + green + blue;
    }
    client.setTimeout(checkTime, 60 * 1000);
//});

function checkTime() {
    // —Ç—É—Ç –∫–æ–¥
    var role = guild.roles.get("id");

    if (role != undefined) {
        role.setColor(r_colors[r_place])
            .catch(console.log);
            if (r_place == (r_colors.length - 1)) {
                r_place = 0;
            } else {
                r_place++;
            }
    }

    client.setTimeout(checkTime, 60 * 1000);
}

function sin_to_hex(i, phase) {
    var sin = Math.sin(Math.PI / r_colors.length * 2 * i + phase);
    var int = Math.floor(sin * 127) + 128;
    var hex = int.toString(16);

    return hex.length === 1 ? '0'+hex : hex;
}
}
module.exports.help = {
	aliases: [],
  name: "ra"
};























.addField("**:05:–ñ–∏–≤–æ—Ç–Ω—ã–µ:03:**",`${bot.commands.filter(cmds => cmds.help.category === "bdc").map(cmds => `\`${cmds.help.name}\`\n${cmds.help.description}\n`).join(" ")}`)